name = "second-brain-test"
main = "index.js"
compatibility_date = "2024-01-01"

# Durable Objects configuration
[durable_objects]
bindings = [
  { name = "BRAIN_DO", class_name = "BrainDO" },
  { name = "PROJECT_DO", class_name = "ProjectDO" },
  { name = "RITUAL_DO", class_name = "RitualDO" }
]

# Durable Object migrations
[[migrations]]
tag = "v1"
new_classes = ["BrainDO", "ProjectDO", "RitualDO"]

# Stub mode flags for system tests
[vars]
LLM_MODE = "stub"
SEARCH_MODE = "stub"
SLACK_MODE = "stub"

# Test worker - separate from production
# Environment variables are set via `wrangler secret put` or Cloudflare dashboard
# Required secrets:
# - SLACK_SIGNING_SECRET (from test Slack app)
# - SLACK_BOT_TOKEN (from test Slack app)
# - GITHUB_TOKEN
# - GITHUB_REPO
# - ANTHROPIC_API_KEY
#
# Optional channel ID overrides:
# - SLACK_INBOX_CHANNEL_ID
# - SLACK_WEEKLY_CHANNEL_ID
# - SLACK_MONTHLY_CHANNEL_ID
# - SLACK_BOT_USER_ID
