name = "second-brain-e2e"
main = "index.js"
compatibility_date = "2024-01-01"

# Durable Objects configuration
[durable_objects]
bindings = [
  { name = "BRAIN_DO", class_name = "BrainDO" },
  { name = "PROJECT_DO", class_name = "ProjectDO" },
  { name = "RITUAL_DO", class_name = "RitualDO" }
]

# Durable Object migrations
[[migrations]]
tag = "v1"
new_classes = ["BrainDO", "ProjectDO", "RitualDO"]

# NO stub flags â€” E2E tests use real APIs (real Claude, real Slack, real Tavily)
# Uses test workspace credentials (same secrets as second-brain-test)

# Environment variables are set via `wrangler secret put --config wrangler.e2e.toml`
# Required secrets:
# - SLACK_SIGNING_SECRET (from test Slack app)
# - SLACK_BOT_TOKEN (from test Slack app)
# - GITHUB_TOKEN
# - GITHUB_REPO (colinalford/brain-coach-test)
# - ANTHROPIC_API_KEY
# - TAVILY_API_KEY
#
# Optional channel ID overrides:
# - SLACK_INBOX_CHANNEL_ID
# - SLACK_WEEKLY_CHANNEL_ID
# - SLACK_MONTHLY_CHANNEL_ID
# - SLACK_BOT_USER_ID
